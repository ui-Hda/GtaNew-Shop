<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mon Panier - GTA New Shop</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&family=Staatliches&display=swap" rel="stylesheet">
  <style>
    :root {--primary-black:#0f0f0f;--secondary-black:#171717;--primary-purple:#8a2be2;--white:#fff;--transition:0.3s;}
    *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
    body{background:var(--primary-black);color:var(--white);}
    header{display:flex;align-items:center;justify-content:space-between;padding:1rem 3rem;position:fixed;width:100%;top:0;background:var(--secondary-black);z-index:1000;}
    .logo img{height:75px;}
    .nav-left ul{display:flex;gap:2rem;}
    .nav-left ul li a{color:var(--white);font-weight:500;text-decoration:none;transition:color var(--transition);}
    .nav-left ul li a:hover{color:var(--primary-purple);}
    .header-right{display:flex;align-items:center;gap:1rem;}
    .header-right button,.gcoins-btn{background:var(--primary-purple);border:none;padding:0.5rem 1rem;border-radius:50px;color:#fff;font-weight:600;cursor:pointer;transition:background var(--transition),transform var(--transition);}
    .header-right button:hover,.gcoins-btn:hover{background:#9d4edd;transform:scale(1.05);}
    main{padding:8rem 3rem;}
    h1{font-family:'Staatliches',sans-serif;font-size:2.5rem;margin-bottom:2rem;text-align:center;color:var(--primary-purple);}
    table{width:100%;border-collapse:collapse;margin-bottom:2rem;}
    th,td{padding:1rem;text-align:center;}
    th{background:var(--secondary-black);color:var(--primary-purple);}
    tr:nth-child(even){background:#1e1e1e;}
    tr img{width:80px;height:60px;object-fit:cover;border-radius:8px;}
    .actions button{margin:0 5px;padding:5px 10px;border:none;border-radius:6px;cursor:pointer;}
    .btn-plus{background:#4caf50;color:#fff;}
    .btn-minus{background:#f39c12;color:#fff;}
    .btn-remove{background:#e74c3c;color:#fff;}
    .total-box{background:var(--secondary-black);padding:1.5rem;border-radius:12px;text-align:right;font-size:1.2rem;}
    .btn-clear{background:#e74c3c;color:#fff;padding:0.7rem 1.2rem;border:none;border-radius:50px;font-weight:600;cursor:pointer;margin-top:1rem;}
    .btn-clear:hover{background:#ff5c5c;}
    footer{text-align:center;padding:2rem 0;background:var(--secondary-black);color:rgba(255,255,255,0.6);margin-top:5rem;}
    footer a{margin:0 1rem;color:rgba(255,255,255,0.6);}
    footer a:hover{color:var(--primary-purple);}
    footer .footer-socials{margin-top:1rem;display:flex;justify-content:center;gap:1rem;}
  </style>
</head>
<body>

<header>
  <div class="logo"><img src="assets/images/logo.png" alt="GTA New Shop"></div>
  <div class="nav-left">
    <ul>
      <li><a href="abonnements.html">Abonnements</a></li>
      <li><a href="objets.html">Objets</a></li>
      <li><a href="armes.html">Armes</a></li>
      <li><a href="permissions.html">Permissions IG</a></li>
      <li><a href="packs.html">Packs</a></li>
      <li><a href="vehicules.html">Véhicules</a></li>
    </ul>
  </div>
  <div class="header-right">
    <button id="panier-btn">Panier (0)</button>
    <a href="gcoins.html" class="gcoins-btn">+ Ajouter des GCoins</a>
  </div>
</header>

<main>
  <h1>Votre Panier</h1>
  <table id="cart-table">
    <thead>
      <tr>
        <th>Image</th>
        <th>Nom</th>
        <th>Prix GCoins</th>
        <th>Prix €</th>
        <th>Quantité</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
  <div class="total-box">
    Total : <span id="total-gcoins">0</span> GCoins | <span id="total-euro">0</span> €
    <br>
    <button class="btn-clear" onclick="clearCart()">Vider le panier</button>
  </div>
</main>

<footer>
  <div>
    <a href="mentions-legales.html">Mentions légales</a>|
    <a href="confidentialite.html">Confidentialité</a>|
    <a href="contact.html">Contact</a>
  </div>
  <div class="footer-socials">
    <a href="#"><i class="fab fa-facebook-f"></i></a>
    <a href="#"><i class="fab fa-twitter"></i></a>
    <a href="#"><i class="fab fa-discord"></i></a>
  </div>
</footer>

<script>
let cart = JSON.parse(localStorage.getItem('cart')) || [];
const tbody = document.querySelector("#cart-table tbody");
const totalGcoinsEl = document.getElementById("total-gcoins");
const totalEuroEl = document.getElementById("total-euro");
const panierBtn = document.getElementById("panier-btn");

function updateCart(){
  tbody.innerHTML="";
  let totalGcoins=0,totalEuro=0;
  cart.forEach((item,index)=>{
    totalGcoins += item.gcoins*item.quantity;
    totalEuro += item.euro*item.quantity;
    let row=document.createElement("tr");
    row.innerHTML=`
      <td><img src="${item.img}" alt="${item.name}"></td>
      <td>${item.name}</td>
      <td>${item.gcoins}</td>
      <td>${item.euro.toFixed(2)}</td>
      <td>${item.quantity}</td>
      <td class="actions">
        <button class="btn-plus" onclick="changeQty(${index},1)">+</button>
        <button class="btn-minus" onclick="changeQty(${index},-1)">-</button>
        <button class="btn-remove" onclick="removeItem(${index})">Suppr</button>
      </td>`;
    tbody.appendChild(row);
  });
  totalGcoinsEl.textContent=totalGcoins;
  totalEuroEl.textContent=totalEuro.toFixed(2);
  panierBtn.innerText=`Panier (${cart.reduce((a,b)=>a+b.quantity,0)})`;
  localStorage.setItem("cart",JSON.stringify(cart));
}

function changeQty(index,delta){
  cart[index].quantity+=delta;
  if(cart[index].quantity<=0){cart.splice(index,1);}
  updateCart();
}
function removeItem(index){
  cart.splice(index,1);
  updateCart();
}
function clearCart(){
  cart=[];
  updateCart();
}

updateCart();
</script>

</body>
</html>
