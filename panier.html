<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Panier - GTA New Shop</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&family=Staatliches&display=swap" rel="stylesheet">

<style>
:root{
  --primary-black:#0f0f0f;
  --secondary-black:#171717;
  --primary-purple:#8a2be2;
  --white:#fff;
  --transition:0.3s;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:var(--primary-black);color:var(--white);padding-top:100px;}
header{display:flex;align-items:center;justify-content:space-between;padding:1rem 3rem;position:fixed;width:100%;top:0;background:var(--secondary-black);z-index:1000;}
header .logo img{height:75px;}
.nav-left ul{display:flex;gap:2rem;}
.nav-left ul li a{color:#fff;text-decoration:none;}
header .header-right{display:flex;align-items:center;gap:1rem;}
header .header-right a{
  background:var(--primary-purple);padding:0.5rem 1rem;border-radius:50px;color:#fff;text-decoration:none;transition:0.3s;
}
header .header-right a:hover{background:#9d4edd;transform:scale(1.05);}

/* Panier */
.cart-container{max-width:1200px;margin:0 auto;padding:2rem;}
.cart-container h2{text-align:center;font-family:'Staatliches',sans-serif;margin-bottom:2rem;}
.cart-items{display:flex;flex-direction:column;gap:1.5rem;}
.cart-item{display:flex;align-items:center;justify-content:space-between;background:var(--secondary-black);padding:1rem;border-radius:12px;}
.cart-item img{width:120px;height:120px;object-fit:contain;border-radius:12px;}
.cart-item-details{flex:1;margin-left:1rem;}
.cart-item-details h3{font-family:'Staatliches',sans-serif;font-size:1.2rem;margin-bottom:0.5rem;}
.cart-item-details p{margin-bottom:0.5rem;}
.cart-item-actions{display:flex;align-items:center;gap:0.5rem;}
.cart-item-actions input{width:50px;padding:0.3rem;border-radius:5px;border:none;text-align:center;}
.cart-item-actions button{background:red;color:#fff;border:none;padding:0.5rem 1rem;border-radius:50px;cursor:pointer;transition:0.3s;}
.cart-item-actions button:hover{transform:scale(1.05);}
.cart-total{text-align:right;font-size:1.5rem;font-weight:700;margin-top:2rem;}
.checkout-btn{
  background:var(--primary-purple);
  padding:0.7rem 2rem;
  border:none;
  border-radius:50px;
  color:#fff;
  font-weight:600;
  cursor:pointer;
  float:right;
  margin-top:1rem;
  transition:0.3s;
}
.checkout-btn:hover{background:#9d4edd;transform:scale(1.05);}
</style>
</head>
<body>

<header>
  <div class="logo"><a href="index.html"><img src="assets/images/logo.png" alt="GTA New Shop"></a></div>
  <div class="nav-left">
    <ul>
      <li><a href="index.html#abonnements">Abonnements</a></li>
      <li><a href="index.html#objets">Objets</a></li>
      <li><a href="index.html#armes">Armes</a></li>
      <li><a href="index.html#permissions">Permissions IG</a></li>
      <li><a href="index.html#packs">Packs</a></li>
      <li><a href="index.html#divers">Divers</a></li>
    </ul>
  </div>
  <div class="header-right">
    <a href="gcoins.html">GCoins</a>
    <a href="panier.html">Panier</a>
  </div>
</header>

<div class="cart-container">
  <h2>Votre Panier</h2>
  <div class="cart-items" id="cart-items"></div>
  <div class="cart-total" id="cart-total">Total: 0 GCoins</div>
  <button class="checkout-btn" id="checkout-btn">Passer commande</button>
</div>

<script>
const cartItemsEl = document.getElementById("cart-items");
const cartTotalEl = document.getElementById("cart-total");

let cart = JSON.parse(localStorage.getItem("cart")) || [];

function renderCart() {
  cartItemsEl.innerHTML = "";
  let total = 0;
  cart.forEach((item, index)=>{
    total += item.price * item.quantity;
    const itemEl = document.createElement("div");
    itemEl.classList.add("cart-item");
    itemEl.innerHTML = `
      <img src="${item.img}" alt="${item.name}">
      <div class="cart-item-details">
        <h3>${item.name}</h3>
        <p>${item.price} GCoins</p>
      </div>
      <div class="cart-item-actions">
        <input type="number" min="1" value="${item.quantity}" data-index="${index}">
        <button data-index="${index}">Supprimer</button>
      </div>
    `;
    cartItemsEl.appendChild(itemEl);
  });
  cartTotalEl.textContent = "Total: " + total + " GCoins";

  // Ajout des events
  document.querySelectorAll(".cart-item-actions input").forEach(input=>{
    input.addEventListener("change",(e)=>{
      const i = e.target.dataset.index;
      cart[i].quantity = parseInt(e.target.value);
      saveCart();
      renderCart();
    });
  });
  document.querySelectorAll(".cart-item-actions button").forEach(btn=>{
    btn.addEventListener("click",(e)=>{
      const i = e.target.dataset.index;
      cart.splice(i,1);
      saveCart();
      renderCart();
    });
  });
}

function saveCart() {
  localStorage.setItem("cart", JSON.stringify(cart));
}

// Checkout
document.getElementById("checkout-btn").addEventListener("click",()=>{
  if(cart.length===0){
    alert("Votre panier est vide !");
    return;
  }
  alert("Commande passée !"); // Remplacer par l'intégration paiement
  cart = [];
  saveCart();
  renderCart();
});

renderCart();
</script>

</body>
</html>
