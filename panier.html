<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GTA New Shop - Panier</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;700&family=Staatliches&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
:root {
  --primary-black:#0f0f0f;
  --secondary-black:#171717;
  --primary-purple:#8a2be2;
  --white:#fff;
  --transition:0.3s;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
body{background:var(--primary-black);color:var(--white);overflow-x:hidden;transition: background var(--transition), color var(--transition);}
header{display:flex;align-items:center;justify-content:space-between;padding:1rem 3rem;position:fixed;width:100%;top:0;background:var(--secondary-black);z-index:1000;transition:background var(--transition);}
header .logo img{height:75px;}
.nav-left{display:flex;align-items:center;gap:2rem;}
.nav-left ul{display:flex;flex-direction:row;gap:2rem;align-items:center;}
.nav-left ul li a{color:var(--white);font-weight:500;transition:color var(--transition);text-decoration:none;}
.nav-left ul li a:hover{color:var(--primary-purple);}
.header-right{display:flex;align-items:center;gap:1rem;}
.header-right button, .header-right .gcoins-btn{background:var(--primary-purple);border:none;padding:0.5rem 1rem;border-radius:50px;color:#fff;font-weight:600;cursor:pointer;transition: background var(--transition), transform var(--transition);}
.header-right button:hover, .header-right .gcoins-btn:hover{background:#9d4edd;transform:scale(1.05);}
main{padding:8rem 3rem 5rem 3rem;}
.panier-grid{display:grid;grid-template-columns:1fr;gap:1.5rem;}
.panier-item{display:flex;align-items:center;background:var(--secondary-black);padding:1rem;border-radius:12px;gap:1rem;}
.panier-item img{width:120px;height:80px;object-fit:cover;border-radius:8px;}
.item-info{flex:1;}
.item-info h3{font-size:1.2rem;color:var(--white);}
.item-info span{display:block;font-weight:600;color:var(--primary-purple);}
.item-quantity{display:flex;align-items:center;gap:0.5rem;}
.item-quantity button{background:var(--primary-purple);border:none;color:#fff;padding:0.3rem 0.7rem;border-radius:50px;cursor:pointer;transition:0.3s;}
.item-quantity button:hover{background:#9d4edd;}
.remove-btn{background:#ff4d4d;border:none;padding:0.3rem 0.7rem;color:#fff;border-radius:50px;cursor:pointer;transition:0.3s;}
.remove-btn:hover{background:#ff1a1a;}
.total-bar{margin-top:2rem;padding:1rem;border-radius:12px;background:linear-gradient(-45deg,#8a2be2,#4b0082,#171717,#0f0f0f);display:flex;justify-content:space-between;align-items:center;color:#fff;font-weight:600;}
footer{text-align:center;padding:2rem 0;background:var(--secondary-black);color:rgba(255,255,255,0.6);margin-top:5rem;}
footer a{margin:0 1rem;color:rgba(255,255,255,0.6);}
footer a:hover{color:var(--primary-purple);}
</style>
</head>
<body>

<header>
  <div class="logo"><img src="assets/images/logo.png" alt="GTA New Shop"></div>
  <div class="nav-left">
    <ul>
      <li><a href="abonnements.html">Abonnements</a></li>
      <li><a href="objets.html">Objets</a></li>
      <li><a href="armes.html">Armes</a></li>
      <li><a href="permissions.html">Permissions IG</a></li>
      <li><a href="packs.html">Packs</a></li>
      <li><a href="vehicules.html">Véhicules</a></li>
    </ul>
  </div>
  <div class="header-right">
    <button id="panier-btn">Panier (0)</button>
    <button>Se connecter</button>
    <a href="gcoins.html" class="gcoins-btn">+ Ajouter des GCoins</a>
  </div>
</header>

<main>
  <h1>Votre Panier</h1>
  <section class="panier-grid" id="panier-grid">
    <!-- Articles ajoutés via JS -->
  </section>
  <div class="total-bar">
    <span>Total :</span>
    <span id="total-prices">0 GCoins / 0 €</span>
  </div>
</main>

<footer>
  <div>
    <a href="mentions-legales.html">Mentions légales</a>|
    <a href="confidentialite.html">Confidentialité</a>|
    <a href="contact.html">Contact</a>
  </div>
</footer>

<script>
let panier = JSON.parse(localStorage.getItem('panier')) || [];
const panierGrid = document.getElementById('panier-grid');
const totalPrices = document.getElementById('total-prices');
const panierBtn = document.getElementById('panier-btn');

function updatePanierUI() {
  panierGrid.innerHTML = '';
  let totalG = 0, totalE = 0;

  panier.forEach((item, index) => {
    totalG += parseFloat(item.gcoins);
    totalE += parseFloat(item.euro);

    const div = document.createElement('div');
    div.classList.add('panier-item');
    div.innerHTML = `
      <img src="${item.img}" alt="${item.title}">
      <div class="item-info">
        <h3>${item.title}</h3>
        <span>${item.gcoins} GCoins / ${item.euro} €</span>
        <div class="item-quantity">
          <button class="minus-btn">-</button>
          <span>${item.qty || 1}</span>
          <button class="plus-btn">+</button>
          <button class="remove-btn">Supprimer</button>
        </div>
      </div>
    `;

    const minusBtn = div.querySelector('.minus-btn');
    const plusBtn = div.querySelector('.plus-btn');
    const removeBtn = div.querySelector('.remove-btn');
    const qtySpan = div.querySelector('.item-quantity span');

    minusBtn.addEventListener('click', () => {
      if(item.qty > 1) item.qty--;
      else item.qty = 1;
      qtySpan.textContent = item.qty;
      updatePanierStorage();
    });
    plusBtn.addEventListener('click', () => {
      item.qty = (item.qty || 1) + 1;
      qtySpan.textContent = item.qty;
      updatePanierStorage();
    });
    removeBtn.addEventListener('click', () => {
      panier.splice(index,1);
      updatePanierStorage();
      updatePanierUI();
    });

    panierGrid.appendChild(div);
  });

  totalPrices.textContent = `${totalG} GCoins / ${totalE} €`;
  panierBtn.innerText = `Panier (${panier.length})`;
}

function updatePanierStorage() {
  localStorage.setItem('panier', JSON.stringify(panier));
  updatePanierUI();
}

updatePanierUI();
</script>

</body>
</html>
